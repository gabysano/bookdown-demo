<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>My Bookdown</title>
  <meta name="description" content="This is an example of using the bookdown package. The otuput format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="My Bookdown" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is an example of using the bookdown package. The otuput format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="My Bookdown" />
  
  <meta name="twitter:description" content="This is an example of using the bookdown package. The otuput format for this example is bookdown::gitbook." />
  

<meta name="author" content="Gaby Sanchez Ortiz" />


<meta name="date" content="2023-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="data-munging.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html"><i class="fa fa-check"></i><b>1</b> APIs and Iteration</a>
<ul>
<li class="chapter" data-level="1.1" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#apis"><i class="fa fa-check"></i><b>1.1</b> APIs</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#nps-visitation-data"><i class="fa fa-check"></i><b>1.1.1</b> NPS Visitation Data</a></li>
<li class="chapter" data-level="1.1.2" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#exercise-1"><i class="fa fa-check"></i><b>1.1.2</b> Exercise #1</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#functions"><i class="fa fa-check"></i><b>1.2</b> Functions</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#functionize-api-pulls"><i class="fa fa-check"></i><b>1.2.1</b> Functionize API Pulls</a></li>
<li class="chapter" data-level="1.2.2" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#function-defaults"><i class="fa fa-check"></i><b>1.2.2</b> Function Defaults</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#iterations"><i class="fa fa-check"></i><b>1.3</b> Iterations</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#for-loops"><i class="fa fa-check"></i><b>1.3.1</b> For loops</a></li>
<li class="chapter" data-level="1.3.2" data-path="apis-and-iteration.html"><a href="apis-and-iteration.html#mapping"><i class="fa fa-check"></i><b>1.3.2</b> Mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-munging.html"><a href="data-munging.html"><i class="fa fa-check"></i><b>2</b> Data munging</a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="data-munging.html"><a href="data-munging.html#pulling-in-necessary-packages-and-data-sets"><i class="fa fa-check"></i><b>2.0.1</b> Pulling in necessary packages and data sets</a></li>
<li class="chapter" data-level="2.0.2" data-path="data-munging.html"><a href="data-munging.html#exploring-our-data"><i class="fa fa-check"></i><b>2.0.2</b> Exploring our data</a></li>
<li class="chapter" data-level="2.0.3" data-path="data-munging.html"><a href="data-munging.html#pivoting"><i class="fa fa-check"></i><b>2.0.3</b> Pivoting</a></li>
<li class="chapter" data-level="2.0.4" data-path="data-munging.html"><a href="data-munging.html#joining"><i class="fa fa-check"></i><b>2.0.4</b> Joining</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="denouement.html"><a href="denouement.html"><i class="fa fa-check"></i><b>3</b> Denouement</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="denouement.html"><a href="denouement.html#lesson-objectives-2"><i class="fa fa-check"></i><b>3.0.1</b> Lesson Objectives:</a></li>
<li class="chapter" data-level="3.0.2" data-path="denouement.html"><a href="denouement.html#streaflow-datasets"><i class="fa fa-check"></i><b>3.0.2</b> Streaflow Datasets</a></li>
<li class="chapter" data-level="3.1" data-path="denouement.html"><a href="denouement.html#exercise-1-2"><i class="fa fa-check"></i><b>3.1</b> Exercise #1</a></li>
<li class="chapter" data-level="3.2" data-path="denouement.html"><a href="denouement.html#exercise-2-2"><i class="fa fa-check"></i><b>3.2</b> Exercise #2</a></li>
<li class="chapter" data-level="3.3" data-path="denouement.html"><a href="denouement.html#exercise-3-2"><i class="fa fa-check"></i><b>3.3</b> Exercise #3</a></li>
<li class="chapter" data-level="3.4" data-path="denouement.html"><a href="denouement.html#exercise-4-2"><i class="fa fa-check"></i><b>3.4</b> Exercise #4</a></li>
<li class="chapter" data-level="3.5" data-path="denouement.html"><a href="denouement.html#exercise-5-2"><i class="fa fa-check"></i><b>3.5</b> Exercise #5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="my-intro.html"><a href="my-intro.html"><i class="fa fa-check"></i>My Intro</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">My Bookdown</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">My Bookdown</h1>
<p class="author"><em>Gaby Sanchez Ortiz</em></p>
<p class="date"><em>2023-03-01</em></p>
</div>
<div id="apis-and-iteration" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> APIs and Iteration<a href="apis-and-iteration.html#apis-and-iteration" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="lesson-objectives" class="section level4 hasAnchor" number="1.0.0.1">
<h4><span class="header-section-number">1.0.0.1</span> Lesson Objectives<a href="apis-and-iteration.html#lesson-objectives" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this lesson we will download data using an application programming interface (API), create our own functions, and iterate using <code>for</code> loops and <code>map()</code>. To fulfill these objectives we will be utilizing two park visitation data sets from the National Park Service (NPS): NPS-wide visitation data, and park unit-specific visitation data.</p>
<p>There are <strong>seven exercises</strong> in this lesson that must be completed.</p>
</div>
<div id="apis" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> APIs<a href="apis-and-iteration.html#apis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>An API is software that acts as an intermediary between an online data warehouse (or server) and its users (or clients). As data scientists, APIs provide us a way to request clean and nicely-formatted data that the server will then send to our local computers, all within our RStudio console! To work with APIs, we will need to use two new packages: <code>httr</code>, which allows us to communicate with the API’s server, and <code>jsonlite</code>, which allows us to work with one of the most common API data formats, JSON. Let’s go ahead and load in our packages for this lesson:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="apis-and-iteration.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="apis-and-iteration.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-3"><a href="apis-and-iteration.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code></pre></div>
<div id="nps-visitation-data" class="section level3 hasAnchor" number="1.1.1">
<h3><span class="header-section-number">1.1.1</span> NPS Visitation Data<a href="apis-and-iteration.html#nps-visitation-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This week, we will be exploring NPS visitor use data across the NPS system as a whole, and and across specific park units. Like many institutions, NPS has a server that stores all of this information (as well as many other things), and an API for users to be able to access it.</p>
<p>To utilize the NPS API in R, we first need to explore its <a href="https://irmaservices.nps.gov/">API’s data structure</a>. In almost every case, we use URLs to access specific data from APIs. To find the access URL for NPS visitation data, go to <a href="https://irmaservices.nps.gov/v3/rest/Stats/help">Stats Rest API - Documentation</a> (though not very intuitive, the NPS API calls its visitation data set “Stats”). Listed there you will see that all data associated with the “Stats” data set can be accessed using the base URL <a href="https://irmaservices.nps.gov/v3/rest/stats"><strong>https://irmaservices.nps.gov/v3/rest/stats</strong></a>. From there, you can tack on additional html text to access two different data sets: <strong>total/{year}</strong> and <strong>visitation</strong>.</p>
<p>For starters, let’s try accessing the <strong>total/{year}</strong>. This data set gives us total monthly visitation across all NPS park units, for a user-selected year:</p>
<p><a href="https://irmaservices.nps.gov/v3/rest/stats/total/%7BYEAR%7D" class="uri"><strong>https://irmaservices.nps.gov/v3/rest/stats/total/{YEAR}</strong></a></p>
<p>If you tried accessing that URL, you’ll have noticed it doesn’t take you anywhere. This is because the curly brackets {} signify locations in the URL that need to be updated by the user based on their specific needs. I’m curious about visitor use in my birth year, so let’s tweak the URL to access visitation data from 1992. In R, we can access this data using <code>httr</code>’s <code>GET()</code> function, replacing {YEAR} with 1992.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="apis-and-iteration.html#cb2-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/1992&quot;</span>)</span>
<span id="cb2-2"><a href="apis-and-iteration.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="apis-and-iteration.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># view raw_data</span></span>
<span id="cb2-4"><a href="apis-and-iteration.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View(raw_data)</span></span></code></pre></div>
<p>Viewing the data set as-is, you can see it is not super human-readable. This is because data sent from APIs is typically packaged using JavaScript Object Notation (JSON).</p>
<p>To unpack the data, we will first need to use <code>httr</code>’s <code>content()</code> function. In this example, we want the data to be extracted as <em>text,</em> since this is a data table. Moreover, its encoding is listed as <em>UTF-8</em>. The encoding parameter can be found by opening our raw data set in our R console:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="apis-and-iteration.html#cb3-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="co"># lists &#39;UTF-8&#39;</span></span></code></pre></div>
<pre><code>## Response [https://irmaservices.nps.gov/v3/rest/stats/total/1992]
##   Date: 2023-03-01 18:00
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 1.42 kB</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="apis-and-iteration.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert content to text</span></span>
<span id="cb5-2"><a href="apis-and-iteration.html#cb5-2" aria-hidden="true" tabindex="-1"></a>unpacked_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span></code></pre></div>
<p>Second, we need to transform this string of text, which is still in JSON formatting, into a data frame using <code>jsonlite</code>’s <code>fromJSON()</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="apis-and-iteration.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text from JSON to data frame</span></span>
<span id="cb6-2"><a href="apis-and-iteration.html#cb6-2" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(unpacked_data)</span>
<span id="cb6-3"><a href="apis-and-iteration.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="apis-and-iteration.html#cb6-4" aria-hidden="true" tabindex="-1"></a>final_data</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1               6209285           10940618       NA       NA 1992
## 2      2               6010027           11931340       NA       NA 1992
## 3      3               6756902           15369139       NA       NA 1992
## 4      4               7255782           21458739       NA       NA 1992
## 5      5               7690763           26648530       NA       NA 1992
## 6      6               7593227           33284625       NA       NA 1992
## 7      7               8438755           41099305       NA       NA 1992
## 8      8               8056823           38625804       NA       NA 1992
## 9      9               7329755           26438266       NA       NA 1992
## 10    10               7105574           23616057       NA       NA 1992
## 11    11               6507805           14338165       NA       NA 1992
## 12    12               6702698           10943961       NA       NA 1992</code></pre>
<p>Hooray, you have now successfully pulled in an online data set using an API! 😁</p>
</div>
<div id="exercise-1" class="section level3 hasAnchor" number="1.1.2" style="color: maroon">
<h3><span class="header-section-number">1.1.2</span> Exercise #1<a href="apis-and-iteration.html#exercise-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Using the code above as a starting point, pull in monthly NPS-wide visitation data for the years 1980, 1999, and 2018.</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="apis-and-iteration.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from 1980</span></span>
<span id="cb8-2"><a href="apis-and-iteration.html#cb8-2" aria-hidden="true" tabindex="-1"></a>NineteenEighty_raw.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/1980&quot;</span>)</span>
<span id="cb8-3"><a href="apis-and-iteration.html#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="apis-and-iteration.html#cb8-4" aria-hidden="true" tabindex="-1"></a>NineteenEighty_raw.data</span></code></pre></div>
<pre><code>## Response [https://irmaservices.nps.gov/v3/rest/stats/total/1980]
##   Date: 2023-03-01 18:00
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 1.42 kB</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="apis-and-iteration.html#cb10-1" aria-hidden="true" tabindex="-1"></a>unpackedEighty.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(NineteenEighty_raw.data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb10-2"><a href="apis-and-iteration.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="apis-and-iteration.html#cb10-3" aria-hidden="true" tabindex="-1"></a>NineteenEighty.data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(unpackedEighty.data)</span>
<span id="cb10-4"><a href="apis-and-iteration.html#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="apis-and-iteration.html#cb10-5" aria-hidden="true" tabindex="-1"></a>NineteenEighty.data</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1               5889356            7460393       NA       NA 1980
## 2      2               5445680            7710887       NA       NA 1980
## 3      3               5805470           11218075       NA       NA 1980
## 4      4               6645552           16022120       NA       NA 1980
## 5      5               6731887           20835342       NA       NA 1980
## 6      6               6803950           26744946       NA       NA 1980
## 7      7               7475505           37275095       NA       NA 1980
## 8      8               6958916           34175930       NA       NA 1980
## 9      9               7088831           20747489       NA       NA 1980
## 10    10               7095629           18109926       NA       NA 1980
## 11    11               6646680           11495645       NA       NA 1980
## 12    12               7273415            8667363       NA       NA 1980</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="apis-and-iteration.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from 1999</span></span>
<span id="cb12-2"><a href="apis-and-iteration.html#cb12-2" aria-hidden="true" tabindex="-1"></a>NineteenNinety_raw.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/1999&quot;</span>)</span>
<span id="cb12-3"><a href="apis-and-iteration.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="apis-and-iteration.html#cb12-4" aria-hidden="true" tabindex="-1"></a>NineteenNinety_raw.data</span></code></pre></div>
<pre><code>## Response [https://irmaservices.nps.gov/v3/rest/stats/total/1999]
##   Date: 2023-03-01 18:00
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 1.43 kB</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="apis-and-iteration.html#cb14-1" aria-hidden="true" tabindex="-1"></a>unpackedNinety.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(NineteenNinety_raw.data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb14-2"><a href="apis-and-iteration.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="apis-and-iteration.html#cb14-3" aria-hidden="true" tabindex="-1"></a>NineteenNinety.data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(unpackedNinety.data)</span>
<span id="cb14-4"><a href="apis-and-iteration.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="apis-and-iteration.html#cb14-5" aria-hidden="true" tabindex="-1"></a>NineteenNinety.data</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1              11250423           10791315       NA       NA 1999
## 2      2              10680926           12526727       NA       NA 1999
## 3      3              12121612           17326973       NA       NA 1999
## 4      4              12356338           23327872       NA       NA 1999
## 5      5              13089518           27994468       NA       NA 1999
## 6      6              12832664           33496802       NA       NA 1999
## 7      7              13677895           42072518       NA       NA 1999
## 8      8              13044805           38013029       NA       NA 1999
## 9      9              12413966           27748261       NA       NA 1999
## 10    10              13097896           24341909       NA       NA 1999
## 11    11              12557324           16852702       NA       NA 1999
## 12    12              12041632           12638303       NA       NA 1999</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="apis-and-iteration.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data from 2018</span></span>
<span id="cb16-2"><a href="apis-and-iteration.html#cb16-2" aria-hidden="true" tabindex="-1"></a>TwentyEighteen_raw.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/2018&quot;</span>)</span>
<span id="cb16-3"><a href="apis-and-iteration.html#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="apis-and-iteration.html#cb16-4" aria-hidden="true" tabindex="-1"></a>TwentyEighteen_raw.data</span></code></pre></div>
<pre><code>## Response [https://irmaservices.nps.gov/v3/rest/stats/total/2018]
##   Date: 2023-03-01 18:00
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 1.43 kB</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="apis-and-iteration.html#cb18-1" aria-hidden="true" tabindex="-1"></a>unpackedEighteen.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(TwentyEighteen_raw.data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb18-2"><a href="apis-and-iteration.html#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="apis-and-iteration.html#cb18-3" aria-hidden="true" tabindex="-1"></a>TwentyEighteen.data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(unpackedEighteen.data)</span>
<span id="cb18-4"><a href="apis-and-iteration.html#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="apis-and-iteration.html#cb18-5" aria-hidden="true" tabindex="-1"></a>TwentyEighteen.data</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1              13712113           12635938       NA       NA 2018
## 2      2              12830242           13822694       NA       NA 2018
## 3      3              14575360           21035485       NA       NA 2018
## 4      4              14265408           25889186       NA       NA 2018
## 5      5              14190347           32211085       NA       NA 2018
## 6      6              14872373           39331983       NA       NA 2018
## 7      7              15334272           44636360       NA       NA 2018
## 8      8              14900808           39182620       NA       NA 2018
## 9      9              14251591           31323509       NA       NA 2018
## 10    10              14059432           26474952       NA       NA 2018
## 11    11              13645350           17774444       NA       NA 2018
## 12    12              13693455           13893577       NA       NA 2018</code></pre>
<div id="exercise-2" class="section level4 hasAnchor" number="1.1.2.1" style="color: maroon">
<h4><span class="header-section-number">1.1.2.1</span> Exercise #2<a href="apis-and-iteration.html#exercise-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Now, let’s explore the second NPS visitation data set, <a href="https://irmaservices.nps.gov/v3/rest/Stats/help">visitation</a>. This call pulls in monthly data for a specific park, across a specific time frame. Use your new API skills to pull in visitation data for Rocky Mountain National Park from 2010 through 2021, based on the API’s URL template. The unit code for Rocky Mountain National Park is ROMO. (Hint: an API URL can have multiple sections that need to be updated by the user.)</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="apis-and-iteration.html#cb20-1" aria-hidden="true" tabindex="-1"></a>ROMO_raw.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span><span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/visitation?unitCodes=ROMO&amp;startMonth=1&amp;startYear=2010&amp;endMonth=12&amp;endYear=2021&quot;</span>)</span>
<span id="cb20-2"><a href="apis-and-iteration.html#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="apis-and-iteration.html#cb20-3" aria-hidden="true" tabindex="-1"></a>ROMO_raw.data</span></code></pre></div>
<pre><code>## Response [https://irmaservices.nps.gov/v3/rest/stats/visitation?unitCodes=ROMO&amp;startMonth=1&amp;startYear=2010&amp;endMonth=12&amp;endYear=2021]
##   Date: 2023-03-01 18:00
##   Status: 200
##   Content-Type: application/json; charset=utf-8
##   Size: 18.6 kB</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="apis-and-iteration.html#cb22-1" aria-hidden="true" tabindex="-1"></a>unpackedROMO.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(ROMO_raw.data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;utf-8&quot;</span>)</span>
<span id="cb22-2"><a href="apis-and-iteration.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="apis-and-iteration.html#cb22-3" aria-hidden="true" tabindex="-1"></a>ROMO.data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(unpackedROMO.data)</span>
<span id="cb22-4"><a href="apis-and-iteration.html#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="apis-and-iteration.html#cb22-5" aria-hidden="true" tabindex="-1"></a>ROMO.data</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode          UnitName Year
## 1       1                  9833              64618     ROMO Rocky Mountain NP 2010
## 2       2                  6835              44576     ROMO Rocky Mountain NP 2010
## 3       3                  6778              70117     ROMO Rocky Mountain NP 2010
## 4       4                  6737              69097     ROMO Rocky Mountain NP 2010
## 5       5                 11780             180710     ROMO Rocky Mountain NP 2010
## 6       6                 22443             441738     ROMO Rocky Mountain NP 2010
## 7       7                 30683             668418     ROMO Rocky Mountain NP 2010
## 8       8                 29990             574638     ROMO Rocky Mountain NP 2010
## 9       9                 22514             461942     ROMO Rocky Mountain NP 2010
## 10     10                 10845             245770     ROMO Rocky Mountain NP 2010
## 11     11                  7714              67862     ROMO Rocky Mountain NP 2010
## 12     12                  6474              66335     ROMO Rocky Mountain NP 2010
## 13      1                  8131              68641     ROMO Rocky Mountain NP 2011
## 14      2                  6085              50540     ROMO Rocky Mountain NP 2011
## 15      3                  7229              73760     ROMO Rocky Mountain NP 2011
## 16      4                  5940              77183     ROMO Rocky Mountain NP 2011
## 17      5                 10025             163587     ROMO Rocky Mountain NP 2011
## 18      6                 27264             500733     ROMO Rocky Mountain NP 2011
## 19      7                 29070             743741     ROMO Rocky Mountain NP 2011
## 20      8                 25498             620534     ROMO Rocky Mountain NP 2011
## 21      9                 22179             483780     ROMO Rocky Mountain NP 2011
## 22     10                  9157             264617     ROMO Rocky Mountain NP 2011
## 23     11                  6514              68076     ROMO Rocky Mountain NP 2011
## 24     12                 11581              61749     ROMO Rocky Mountain NP 2011
## 25      1                    90              68537     ROMO Rocky Mountain NP 2012
## 26      2                    50              62036     ROMO Rocky Mountain NP 2012
## 27      3                    80             104374     ROMO Rocky Mountain NP 2012
## 28      4                    70             117053     ROMO Rocky Mountain NP 2012
## 29      5                   490             228950     ROMO Rocky Mountain NP 2012
## 30      6                  1400             500206     ROMO Rocky Mountain NP 2012
## 31      7                  2050             651722     ROMO Rocky Mountain NP 2012
## 32      8                  2300             589131     ROMO Rocky Mountain NP 2012
## 33      9                  1500             527172     ROMO Rocky Mountain NP 2012
## 34     10                   560             219946     ROMO Rocky Mountain NP 2012
## 35     11                   100              93714     ROMO Rocky Mountain NP 2012
## 36     12                    60              66776     ROMO Rocky Mountain NP 2012
## 37      1                    90              78022     ROMO Rocky Mountain NP 2013
## 38      2                    50              68831     ROMO Rocky Mountain NP 2013
## 39      3                    80              89691     ROMO Rocky Mountain NP 2013
## 40      4                    70              90379     ROMO Rocky Mountain NP 2013
## 41      5                   490             239184     ROMO Rocky Mountain NP 2013
## 42      6                  1400             602508     ROMO Rocky Mountain NP 2013
## 43      7                  2050             712583     ROMO Rocky Mountain NP 2013
## 44      8                  2300             621852     ROMO Rocky Mountain NP 2013
## 45      9                  1500             253467     ROMO Rocky Mountain NP 2013
## 46     10                   560              66275     ROMO Rocky Mountain NP 2013
## 47     11                   100              86379     ROMO Rocky Mountain NP 2013
## 48     12                    60              81970     ROMO Rocky Mountain NP 2013
## 49      1                    90              77633     ROMO Rocky Mountain NP 2014
## 50      2                    50              76881     ROMO Rocky Mountain NP 2014
## 51      3                    80              99077     ROMO Rocky Mountain NP 2014
## 52      4                    70              97100     ROMO Rocky Mountain NP 2014
## 53      5                   490             220532     ROMO Rocky Mountain NP 2014
## 54      6                  1400             538725     ROMO Rocky Mountain NP 2014
## 55      7                  2050             693685     ROMO Rocky Mountain NP 2014
## 56      8                  2300             616826     ROMO Rocky Mountain NP 2014
## 57      9                  1500             537694     ROMO Rocky Mountain NP 2014
## 58     10                   560             305651     ROMO Rocky Mountain NP 2014
## 59     11                   100              90915     ROMO Rocky Mountain NP 2014
## 60     12                    60              80032     ROMO Rocky Mountain NP 2014
## 61      1                    90              98928     ROMO Rocky Mountain NP 2015
## 62      2                    50              85123     ROMO Rocky Mountain NP 2015
## 63      3                    80             134304     ROMO Rocky Mountain NP 2015
## 64      4                    70             116959     ROMO Rocky Mountain NP 2015
## 65      5                   490             259711     ROMO Rocky Mountain NP 2015
## 66      6                  1400             608796     ROMO Rocky Mountain NP 2015
## 67      7                  2050             858426     ROMO Rocky Mountain NP 2015
## 68      8                  2300             765579     ROMO Rocky Mountain NP 2015
## 69      9                  1500             644350     ROMO Rocky Mountain NP 2015
## 70     10                   560             371558     ROMO Rocky Mountain NP 2015
## 71     11                   100             118398     ROMO Rocky Mountain NP 2015
## 72     12                    60              93784     ROMO Rocky Mountain NP 2015
## 73      1                    90             115207     ROMO Rocky Mountain NP 2016
## 74      2                    50             105125     ROMO Rocky Mountain NP 2016
## 75      3                    80             135053     ROMO Rocky Mountain NP 2016
## 76      4                    70             129967     ROMO Rocky Mountain NP 2016
## 77      5                   490             285868     ROMO Rocky Mountain NP 2016
## 78      6                  1400             700990     ROMO Rocky Mountain NP 2016
## 79      7                  2050             912507     ROMO Rocky Mountain NP 2016
## 80      8                  2300             772849     ROMO Rocky Mountain NP 2016
## 81      9                  1500             711110     ROMO Rocky Mountain NP 2016
## 82     10                   560             398525     ROMO Rocky Mountain NP 2016
## 83     11                   100             158553     ROMO Rocky Mountain NP 2016
## 84     12                    60              91831     ROMO Rocky Mountain NP 2016
## 85      1                    90              95602     ROMO Rocky Mountain NP 2017
## 86      2                    50              98832     ROMO Rocky Mountain NP 2017
## 87      3                    80             145110     ROMO Rocky Mountain NP 2017
## 88      4                    70             158360     ROMO Rocky Mountain NP 2017
## 89      5                   490             263222     ROMO Rocky Mountain NP 2017
## 90      6                  1400             741247     ROMO Rocky Mountain NP 2017
## 91      7                  2050             885478     ROMO Rocky Mountain NP 2017
## 92      8                  2300             782625     ROMO Rocky Mountain NP 2017
## 93      9                  1500             681160     ROMO Rocky Mountain NP 2017
## 94     10                   560             332526     ROMO Rocky Mountain NP 2017
## 95     11                   100             140223     ROMO Rocky Mountain NP 2017
## 96     12                    60             112830     ROMO Rocky Mountain NP 2017
## 97      1                    90             111422     ROMO Rocky Mountain NP 2018
## 98      2                    50              84245     ROMO Rocky Mountain NP 2018
## 99      3                    80             156434     ROMO Rocky Mountain NP 2018
## 100     4                    70             151975     ROMO Rocky Mountain NP 2018
## 101     5                   490             305993     ROMO Rocky Mountain NP 2018
## 102     6                  1400             720822     ROMO Rocky Mountain NP 2018
## 103     7                  2050             931929     ROMO Rocky Mountain NP 2018
## 104     8                  2300             798306     ROMO Rocky Mountain NP 2018
## 105     9                  1500             784480     ROMO Rocky Mountain NP 2018
## 106    10                   560             312757     ROMO Rocky Mountain NP 2018
## 107    11                   100             125349     ROMO Rocky Mountain NP 2018
## 108    12                    60             106781     ROMO Rocky Mountain NP 2018
## 109     1                    90             118152     ROMO Rocky Mountain NP 2019
## 110     2                    50              99873     ROMO Rocky Mountain NP 2019
## 111     3                    80             146414     ROMO Rocky Mountain NP 2019
## 112     4                    70             160259     ROMO Rocky Mountain NP 2019
## 113     5                   490             280351     ROMO Rocky Mountain NP 2019
## 114     6                  1400             698224     ROMO Rocky Mountain NP 2019
## 115     7                  2050             973992     ROMO Rocky Mountain NP 2019
## 116     8                  2300             830039     ROMO Rocky Mountain NP 2019
## 117     9                  1500             752320     ROMO Rocky Mountain NP 2019
## 118    10                   560             374003     ROMO Rocky Mountain NP 2019
## 119    11                   100             123376     ROMO Rocky Mountain NP 2019
## 120    12                    60             113050     ROMO Rocky Mountain NP 2019
## 121     1                    90             126866     ROMO Rocky Mountain NP 2020
## 122     2                    50             110667     ROMO Rocky Mountain NP 2020
## 123     3                    80              97690     ROMO Rocky Mountain NP 2020
## 124     4                    70                  0     ROMO Rocky Mountain NP 2020
## 125     5                   490              63051     ROMO Rocky Mountain NP 2020
## 126     6                  1400             491355     ROMO Rocky Mountain NP 2020
## 127     7                  2050             723478     ROMO Rocky Mountain NP 2020
## 128     8                  2300             580368     ROMO Rocky Mountain NP 2020
## 129     9                  1500             500019     ROMO Rocky Mountain NP 2020
## 130    10                   560             297665     ROMO Rocky Mountain NP 2020
## 131    11                   100             157875     ROMO Rocky Mountain NP 2020
## 132    12                    60             156165     ROMO Rocky Mountain NP 2020
## 133     1                    90             140715     ROMO Rocky Mountain NP 2021
## 134     2                    50             133771     ROMO Rocky Mountain NP 2021
## 135     3                    80             155819     ROMO Rocky Mountain NP 2021
## 136     4                    70             183792     ROMO Rocky Mountain NP 2021
## 137     5                   490             335060     ROMO Rocky Mountain NP 2021
## 138     6                  1400             671232     ROMO Rocky Mountain NP 2021
## 139     7                  2050             904767     ROMO Rocky Mountain NP 2021
## 140     8                  2300             746343     ROMO Rocky Mountain NP 2021
## 141     9                  1500             521233     ROMO Rocky Mountain NP 2021
## 142    10                   560             352736     ROMO Rocky Mountain NP 2021
## 143    11                   100             164992     ROMO Rocky Mountain NP 2021
## 144    12                    60             124388     ROMO Rocky Mountain NP 2021</code></pre>
</div>
</div>
</div>
<div id="functions" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Functions<a href="apis-and-iteration.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You may find yourself thinking, <em>“Wow, exercise 1 was overkill!”</em> Indeed, you had to run several lines of code that were nearly identical to what was shown upstream; the only thing you needed to change from one year to the next was the year itself. This sort of redundant coding is not good coding practice. Instead of copying and pasting many coding steps over and over again and tweaking just a tiny portion of it, we can write <em>functions</em> that combine many coding steps into just one command. The benefits of reducing redundant code in this way are threefold. As Grolemund &amp; Wickham describe in their book, <a href="https://r4ds.had.co.nz/"><em>R for Data Science</em></a>:</p>
<blockquote>
<ol style="list-style-type: decimal">
<li>It’s easier to see the intent of your code, because your eyes are drawn to what’s different, not what stays the same.</li>
<li>It’s easier to respond to changes in requirements. As your needs change, you only need to make changes in one place, rather than remembering to change every place that you copied-and-pasted the code.</li>
<li>You’re likely to have fewer bugs because each line of code is used in more places.</li>
</ol>
</blockquote>
<p><em>Functions</em> provide the option of changing just a minor part of the code base from one run to the next. Think of the <code>GET()</code> function in <code>httr</code>: it is a function that has code under-the-hood so that it isn’t necessary to write out the raw code each time we use it. Instead, we call out the function’s name (<code>GET()</code>), and the necessary argument within that function that tweaks the code to fit it to our needs (<code>url = "&lt;SOME_URL_WE_CHOOSE&gt;"</code>).</p>
<div id="functionize-api-pulls" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Functionize API Pulls<a href="apis-and-iteration.html#functionize-api-pulls" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s try making a function called <code>parkwide_visitation()</code> that pulls in NPS-wide visitation data for a year of choice. To develop a function requires specific formatting:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="apis-and-iteration.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>NAME<span class="sc">&gt;</span> <span class="er">&lt;</span><span class="sc">-</span> <span class="cf">function</span>(<span class="sc">&lt;</span>ARGUMENTS<span class="sc">&gt;</span>){</span>
<span id="cb24-2"><a href="apis-and-iteration.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-3"><a href="apis-and-iteration.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>ACTIONS<span class="sc">&gt;</span></span>
<span id="cb24-4"><a href="apis-and-iteration.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-5"><a href="apis-and-iteration.html#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="sc">&lt;</span>OUTPUT<span class="sc">&gt;</span>)</span>
<span id="cb24-6"><a href="apis-and-iteration.html#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="apis-and-iteration.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
<p>… where NAME is what we want to name the function; ARGUMENTS are the variables in the code that get “tweaked”; ACTIONS are the lines of code we want the function to perform (which includes our ARGUMENTS); and the OUTPUT is the object we want as the final outcome of running the function.</p>
<p>For <code>parkwide_visitation()</code>, we will use our upstream code as the basis for our function, but with a few minor yet extremely important tweaks:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="apis-and-iteration.html#cb25-1" aria-hidden="true" tabindex="-1"></a>parkwide_visitation <span class="ot">&lt;-</span> <span class="cf">function</span>(year){</span>
<span id="cb25-2"><a href="apis-and-iteration.html#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="apis-and-iteration.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pull in the data</span></span>
<span id="cb25-4"><a href="apis-and-iteration.html#cb25-4" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> </span>
<span id="cb25-5"><a href="apis-and-iteration.html#cb25-5" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># parse out year so that it can be chosen with the &quot;year&quot; argument, using paste0()</span></span>
<span id="cb25-6"><a href="apis-and-iteration.html#cb25-6" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">paste0</span>(<span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/&quot;</span>, year))</span>
<span id="cb25-7"><a href="apis-and-iteration.html#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="apis-and-iteration.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># convert content to text</span></span>
<span id="cb25-9"><a href="apis-and-iteration.html#cb25-9" aria-hidden="true" tabindex="-1"></a>extracted_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span>
<span id="cb25-10"><a href="apis-and-iteration.html#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="apis-and-iteration.html#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text from JSON to data frame</span></span>
<span id="cb25-12"><a href="apis-and-iteration.html#cb25-12" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(extracted_data)</span>
<span id="cb25-13"><a href="apis-and-iteration.html#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="apis-and-iteration.html#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(final_data)</span>
<span id="cb25-15"><a href="apis-and-iteration.html#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="apis-and-iteration.html#cb25-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>In the above function, our first object, <code>raw_data</code>, now changes based on how we define our year argument. We accomplish this through <code>paste0()</code>, which takes listed objects, transforms them into characters (if they aren’t already), and concatenates them into a single character string. For example:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="apis-and-iteration.html#cb26-1" aria-hidden="true" tabindex="-1"></a>my_sentence <span class="ot">&lt;-</span> <span class="st">&quot;I need at least&quot;</span></span>
<span id="cb26-2"><a href="apis-and-iteration.html#cb26-2" aria-hidden="true" tabindex="-1"></a>my_other_sentence <span class="ot">&lt;-</span> <span class="st">&quot;pints of ice cream a day&quot;</span></span>
<span id="cb26-3"><a href="apis-and-iteration.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="apis-and-iteration.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(my_sentence, <span class="st">&quot; &quot;</span>, <span class="dv">08</span>, <span class="st">&quot; &quot;</span>, my_other_sentence, <span class="st">&quot;!&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;I need at least 8 pints of ice cream a day!&quot;</code></pre>
<p>So, if we make <code>year = 2021</code> in our <code>parkwide_visitation()</code> function, the year object becomes the number 2021, which makes the <code>paste0()</code> output “<a href="https://irmaservices.nps.gov/v3/rest/stats/total/2021" class="uri">https://irmaservices.nps.gov/v3/rest/stats/total/2021</a>”, which subsequently pulls data for 2021. In other words, we can now pull visitation data for any year with just one line of code!</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="apis-and-iteration.html#cb28-1" aria-hidden="true" tabindex="-1"></a>pull_2018 <span class="ot">&lt;-</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="dv">2018</span>)</span>
<span id="cb28-2"><a href="apis-and-iteration.html#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="apis-and-iteration.html#cb28-3" aria-hidden="true" tabindex="-1"></a>pull_1980 <span class="ot">&lt;-</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="dv">1980</span>)</span>
<span id="cb28-4"><a href="apis-and-iteration.html#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="apis-and-iteration.html#cb28-5" aria-hidden="true" tabindex="-1"></a>pull_1992 <span class="ot">&lt;-</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="dv">1992</span>)</span>
<span id="cb28-6"><a href="apis-and-iteration.html#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="apis-and-iteration.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ... and so on!</span></span></code></pre></div>
<div id="exercise-3" class="section level4 hasAnchor" number="1.2.1.1" style="color: maroon">
<h4><span class="header-section-number">1.2.1.1</span> Exercise #3<a href="apis-and-iteration.html#exercise-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Create a function called <code>unit_visitation()</code> that pulls park-specific visitation data for any park, across any time frame. For a list of all park codes, download <a href="https://www.nps.gov/aboutus/foia/upload/NPS-Unit-List.xlsx">this spreadsheet</a>. (Hint 1: functions can have multiple arguments. Hint 2: what’s the difference between <code>05</code> and <code>"05"</code>?)</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="apis-and-iteration.html#cb29-1" aria-hidden="true" tabindex="-1"></a>unit_visitation <span class="ot">&lt;-</span> <span class="cf">function</span>(unitCode,startMonth,startYear,endMonth,endYear){</span>
<span id="cb29-2"><a href="apis-and-iteration.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-3"><a href="apis-and-iteration.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  raw_visitation.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="fu">paste0</span>(<span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/visitation?unitCodes=&quot;</span>,unitCode,<span class="st">&quot;&amp;startMonth=&quot;</span>,startMonth,<span class="st">&quot;&amp;startYear=&quot;</span>,startYear,<span class="st">&quot;&amp;endMonth=&quot;</span>,endMonth,<span class="st">&quot;&amp;endYear=&quot;</span>,endYear))</span>
<span id="cb29-4"><a href="apis-and-iteration.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-5"><a href="apis-and-iteration.html#cb29-5" aria-hidden="true" tabindex="-1"></a>  extracted_visitation.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_visitation.data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;utf-8&quot;</span>)</span>
<span id="cb29-6"><a href="apis-and-iteration.html#cb29-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-7"><a href="apis-and-iteration.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  final_visitation.data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(extracted_visitation.data)</span>
<span id="cb29-8"><a href="apis-and-iteration.html#cb29-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-9"><a href="apis-and-iteration.html#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(final_visitation.data)</span>
<span id="cb29-10"><a href="apis-and-iteration.html#cb29-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-11"><a href="apis-and-iteration.html#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="apis-and-iteration.html#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Testing if function works with Joshua Tree NP (JOTR) from 1999 to 2011</span></span>
<span id="cb29-13"><a href="apis-and-iteration.html#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="apis-and-iteration.html#cb29-14" aria-hidden="true" tabindex="-1"></a>JOTR_visitation <span class="ot">&lt;-</span> <span class="fu">unit_visitation</span>(<span class="at">unitCode =</span> <span class="st">&quot;JOTR&quot;</span>, <span class="at">startMonth =</span> <span class="dv">1</span>, <span class="at">startYear =</span> <span class="dv">1999</span>, <span class="at">endMonth =</span> <span class="dv">12</span>, <span class="at">endYear =</span> <span class="dv">2011</span>)</span>
<span id="cb29-15"><a href="apis-and-iteration.html#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="apis-and-iteration.html#cb29-16" aria-hidden="true" tabindex="-1"></a>JOTR_visitation</span></code></pre></div>
<pre><code>##     Month NonRecreationVisitors RecreationVisitors UnitCode       UnitName Year
## 1       1                   344             104162     JOTR Joshua Tree NP 1999
## 2       2                   416             126667     JOTR Joshua Tree NP 1999
## 3       3                   606             182659     JOTR Joshua Tree NP 1999
## 4       4                   550             163839     JOTR Joshua Tree NP 1999
## 5       5                   484             140726     JOTR Joshua Tree NP 1999
## 6       6                   262              72775     JOTR Joshua Tree NP 1999
## 7       7                   214              61507     JOTR Joshua Tree NP 1999
## 8       8                   239              68923     JOTR Joshua Tree NP 1999
## 9       9                   279              79211     JOTR Joshua Tree NP 1999
## 10     10                   369              99979     JOTR Joshua Tree NP 1999
## 11     11                   436             119216     JOTR Joshua Tree NP 1999
## 12     12                   352              96676     JOTR Joshua Tree NP 1999
## 13      1                   372             103797     JOTR Joshua Tree NP 2000
## 14      2                   397             116756     JOTR Joshua Tree NP 2000
## 15      3                   499             146710     JOTR Joshua Tree NP 2000
## 16      4                   568             168176     JOTR Joshua Tree NP 2000
## 17      5                   338              95876     JOTR Joshua Tree NP 2000
## 18      6                   237              67078     JOTR Joshua Tree NP 2000
## 19      7                   220              65298     JOTR Joshua Tree NP 2000
## 20      8                   212              62408     JOTR Joshua Tree NP 2000
## 21      9                   262              73924     JOTR Joshua Tree NP 2000
## 22     10                   358              99099     JOTR Joshua Tree NP 2000
## 23     11                   408             111312     JOTR Joshua Tree NP 2000
## 24     12                   452             123501     JOTR Joshua Tree NP 2000
## 25      1                   361             101426     JOTR Joshua Tree NP 2001
## 26      2                   371             102687     JOTR Joshua Tree NP 2001
## 27      3                   630             171438     JOTR Joshua Tree NP 2001
## 28      4                   685             190339     JOTR Joshua Tree NP 2001
## 29      5                   386             104431     JOTR Joshua Tree NP 2001
## 30      6                   240              64616     JOTR Joshua Tree NP 2001
## 31      7                   280              76297     JOTR Joshua Tree NP 2001
## 32      8                   238              65376     JOTR Joshua Tree NP 2001
## 33      9                   273              72161     JOTR Joshua Tree NP 2001
## 34     10                   373              98221     JOTR Joshua Tree NP 2001
## 35     11                   510             132952     JOTR Joshua Tree NP 2001
## 36     12                   435             100973     JOTR Joshua Tree NP 2001
## 37      1                   389             104712     JOTR Joshua Tree NP 2002
## 38      2                   376             103356     JOTR Joshua Tree NP 2002
## 39      3                   528             148922     JOTR Joshua Tree NP 2002
## 40      4                   563             153933     JOTR Joshua Tree NP 2002
## 41      5                   373             101747     JOTR Joshua Tree NP 2002
## 42      6                   208              57377     JOTR Joshua Tree NP 2002
## 43      7                   254              68581     JOTR Joshua Tree NP 2002
## 44      8                   201              56082     JOTR Joshua Tree NP 2002
## 45      9                   227              61721     JOTR Joshua Tree NP 2002
## 46     10                   326              88251     JOTR Joshua Tree NP 2002
## 47     11                   453             120774     JOTR Joshua Tree NP 2002
## 48     12                   416             112920     JOTR Joshua Tree NP 2002
## 49      1                   426             117131     JOTR Joshua Tree NP 2003
## 50      2                   405             114255     JOTR Joshua Tree NP 2003
## 51      3                   581             162371     JOTR Joshua Tree NP 2003
## 52      4                   638             180230     JOTR Joshua Tree NP 2003
## 53      5                   436             120713     JOTR Joshua Tree NP 2003
## 54      6                   231              63436     JOTR Joshua Tree NP 2003
## 55      7                   194              54407     JOTR Joshua Tree NP 2003
## 56      8                   215              58947     JOTR Joshua Tree NP 2003
## 57      9                   246              66148     JOTR Joshua Tree NP 2003
## 58     10                   397             106265     JOTR Joshua Tree NP 2003
## 59     11                   450             125043     JOTR Joshua Tree NP 2003
## 60     12                   420             114400     JOTR Joshua Tree NP 2003
## 61      1                   412             113881     JOTR Joshua Tree NP 2004
## 62      2                   399             112696     JOTR Joshua Tree NP 2004
## 63      3                   622             175444     JOTR Joshua Tree NP 2004
## 64      4                   654             183679     JOTR Joshua Tree NP 2004
## 65      5                   363             103122     JOTR Joshua Tree NP 2004
## 66      6                   239              64776     JOTR Joshua Tree NP 2004
## 67      7                   211              59155     JOTR Joshua Tree NP 2004
## 68      8                   213              59699     JOTR Joshua Tree NP 2004
## 69      9                   249              67954     JOTR Joshua Tree NP 2004
## 70     10                   374             104369     JOTR Joshua Tree NP 2004
## 71     11                   401             112344     JOTR Joshua Tree NP 2004
## 72     12                   307              86540     JOTR Joshua Tree NP 2004
## 73      1                   326              89602     JOTR Joshua Tree NP 2005
## 74      2                   379             107227     JOTR Joshua Tree NP 2005
## 75      3                   931             267723     JOTR Joshua Tree NP 2005
## 76      4                   736             207664     JOTR Joshua Tree NP 2005
## 77      5                   469             126323     JOTR Joshua Tree NP 2005
## 78      6                   290              76272     JOTR Joshua Tree NP 2005
## 79      7                   183              50610     JOTR Joshua Tree NP 2005
## 80      8                   248              66270     JOTR Joshua Tree NP 2005
## 81      9                   262              70188     JOTR Joshua Tree NP 2005
## 82     10                   382             101034     JOTR Joshua Tree NP 2005
## 83     11                   414             113626     JOTR Joshua Tree NP 2005
## 84     12                   358              98572     JOTR Joshua Tree NP 2005
## 85      1                   381             104777     JOTR Joshua Tree NP 2006
## 86      2                   416             117045     JOTR Joshua Tree NP 2006
## 87      3                   537             152137     JOTR Joshua Tree NP 2006
## 88      4                   671             189636     JOTR Joshua Tree NP 2006
## 89      5                   391             108837     JOTR Joshua Tree NP 2006
## 90      6                   250              67150     JOTR Joshua Tree NP 2006
## 91      7                   162              46833     JOTR Joshua Tree NP 2006
## 92      8                   209              58973     JOTR Joshua Tree NP 2006
## 93      9                   266              73089     JOTR Joshua Tree NP 2006
## 94     10                   397             105927     JOTR Joshua Tree NP 2006
## 95     11                   483             128990     JOTR Joshua Tree NP 2006
## 96     12                   386             103027     JOTR Joshua Tree NP 2006
## 97      1                   355              95278     JOTR Joshua Tree NP 2007
## 98      2                   462             124960     JOTR Joshua Tree NP 2007
## 99      3                   541             149974     JOTR Joshua Tree NP 2007
## 100     4                   605             166256     JOTR Joshua Tree NP 2007
## 101     5                   361             105744     JOTR Joshua Tree NP 2007
## 102     6                   258              68848     JOTR Joshua Tree NP 2007
## 103     7                   260              68325     JOTR Joshua Tree NP 2007
## 104     8                   281              73565     JOTR Joshua Tree NP 2007
## 105     9                   290              76578     JOTR Joshua Tree NP 2007
## 106    10                   404             107220     JOTR Joshua Tree NP 2007
## 107    11                   602             156581     JOTR Joshua Tree NP 2007
## 108    12                   388             105650     JOTR Joshua Tree NP 2007
## 109     1                   378             102205     JOTR Joshua Tree NP 2008
## 110     2                   455             127998     JOTR Joshua Tree NP 2008
## 111     3                   916             260407     JOTR Joshua Tree NP 2008
## 112     4                   669             177975     JOTR Joshua Tree NP 2008
## 113     5                   421             113044     JOTR Joshua Tree NP 2008
## 114     6                   219              60395     JOTR Joshua Tree NP 2008
## 115     7                   233              64621     JOTR Joshua Tree NP 2008
## 116     8                   239              66032     JOTR Joshua Tree NP 2008
## 117     9                   294              78831     JOTR Joshua Tree NP 2008
## 118    10                   453             117308     JOTR Joshua Tree NP 2008
## 119    11                   487             129558     JOTR Joshua Tree NP 2008
## 120    12                   344              94072     JOTR Joshua Tree NP 2008
## 121     1                   358              98513     JOTR Joshua Tree NP 2009
## 122     2                   350              97112     JOTR Joshua Tree NP 2009
## 123     3                   608             171428     JOTR Joshua Tree NP 2009
## 124     4                   656             177361     JOTR Joshua Tree NP 2009
## 125     5                   469             123705     JOTR Joshua Tree NP 2009
## 126     6                   281              74463     JOTR Joshua Tree NP 2009
## 127     7                   247              65923     JOTR Joshua Tree NP 2009
## 128     8                   248              67161     JOTR Joshua Tree NP 2009
## 129     9                   303              79011     JOTR Joshua Tree NP 2009
## 130    10                   452             119870     JOTR Joshua Tree NP 2009
## 131    11                   473             126299     JOTR Joshua Tree NP 2009
## 132    12                   378             103625     JOTR Joshua Tree NP 2009
## 133     1                   402             106932     JOTR Joshua Tree NP 2010
## 134     2                   448             123925     JOTR Joshua Tree NP 2010
## 135     3                   761             207336     JOTR Joshua Tree NP 2010
## 136     4                   689             190427     JOTR Joshua Tree NP 2010
## 137     5                   483             131035     JOTR Joshua Tree NP 2010
## 138     6                   287              76320     JOTR Joshua Tree NP 2010
## 139     7                   266              72789     JOTR Joshua Tree NP 2010
## 140     8                   291              80053     JOTR Joshua Tree NP 2010
## 141     9                   293              81596     JOTR Joshua Tree NP 2010
## 142    10                   434             117098     JOTR Joshua Tree NP 2010
## 143    11                   498             134653     JOTR Joshua Tree NP 2010
## 144    12                   413             112812     JOTR Joshua Tree NP 2010
## 145     1                   426             116050     JOTR Joshua Tree NP 2011
## 146     2                   433             119977     JOTR Joshua Tree NP 2011
## 147     3                   704             194339     JOTR Joshua Tree NP 2011
## 148     4                   699             195244     JOTR Joshua Tree NP 2011
## 149     5                   454             124339     JOTR Joshua Tree NP 2011
## 150     6                   301              81534     JOTR Joshua Tree NP 2011
## 151     7                   270              74707     JOTR Joshua Tree NP 2011
## 152     8                   232              64969     JOTR Joshua Tree NP 2011
## 153     9                   285              71694     JOTR Joshua Tree NP 2011
## 154    10                   400             102752     JOTR Joshua Tree NP 2011
## 155    11                   513             135131     JOTR Joshua Tree NP 2011
## 156    12                   436             115501     JOTR Joshua Tree NP 2011</code></pre>
</div>
<div id="exercise-4" class="section level4 hasAnchor" number="1.2.1.2" style="color: maroon">
<h4><span class="header-section-number">1.2.1.2</span> Exercise #4<a href="apis-and-iteration.html#exercise-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Using <code>unit_visitation()</code>, pull in visitation data for Rocky Mountain National Park (ROMO), Everglades National Park (EVER), and Theodore Roosevelt National Park (THRO) from 1990 through 2021.</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="apis-and-iteration.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using unit_visitation() for Rocky Mountain National Park</span></span>
<span id="cb31-2"><a href="apis-and-iteration.html#cb31-2" aria-hidden="true" tabindex="-1"></a>ROMO_visitation <span class="ot">&lt;-</span> <span class="fu">unit_visitation</span>(<span class="at">unitCode =</span> <span class="st">&quot;ROMO&quot;</span>, <span class="at">startMonth =</span> <span class="dv">1</span>, <span class="at">startYear =</span> <span class="dv">1990</span>, <span class="at">endMonth =</span> <span class="dv">12</span>, <span class="at">endYear =</span> <span class="dv">2021</span>)</span>
<span id="cb31-3"><a href="apis-and-iteration.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="apis-and-iteration.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using unit_visitation() for Everglades National Park</span></span>
<span id="cb31-5"><a href="apis-and-iteration.html#cb31-5" aria-hidden="true" tabindex="-1"></a>EVER_visitation <span class="ot">&lt;-</span> <span class="fu">unit_visitation</span>(<span class="at">unitCode =</span> <span class="st">&quot;EVER&quot;</span>, <span class="at">startMonth =</span> <span class="dv">1</span>, <span class="at">startYear =</span> <span class="dv">1990</span>, <span class="at">endMonth =</span> <span class="dv">12</span>, <span class="at">endYear =</span> <span class="dv">2021</span>)</span>
<span id="cb31-6"><a href="apis-and-iteration.html#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="apis-and-iteration.html#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Using unit_visitation() for Theodore Roosevelt National Park</span></span>
<span id="cb31-8"><a href="apis-and-iteration.html#cb31-8" aria-hidden="true" tabindex="-1"></a>THRO_visitation <span class="ot">&lt;-</span> <span class="fu">unit_visitation</span>(<span class="at">unitCode =</span> <span class="st">&quot;THRO&quot;</span>, <span class="at">startMonth =</span> <span class="dv">1</span>, <span class="at">startYear =</span> <span class="dv">1990</span>, <span class="at">endMonth =</span> <span class="dv">12</span>, <span class="at">endYear =</span> <span class="dv">2021</span>)</span></code></pre></div>
</div>
</div>
<div id="function-defaults" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Function Defaults<a href="apis-and-iteration.html#function-defaults" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Look at the code that you just wrote; writing out all of those unchanging date arguments still feels repetitive, right? When developing functions, there is an option for setting default values for arguments so that you don’t necessarily have to write all of them out every time you run it in the future. But, the option still exists within the function to make changes when necessary. For example, let’s tweak our <code>parkwide_visitaion()</code> function to have the default year be 2021:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="apis-and-iteration.html#cb32-1" aria-hidden="true" tabindex="-1"></a>parkwide_visitation <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">year =</span> <span class="st">&quot;2021&quot;</span>) {</span>
<span id="cb32-2"><a href="apis-and-iteration.html#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="apis-and-iteration.html#cb32-3" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="fu">paste0</span>(<span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/total/&quot;</span>, year))</span>
<span id="cb32-4"><a href="apis-and-iteration.html#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="apis-and-iteration.html#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># convert content to text</span></span>
<span id="cb32-6"><a href="apis-and-iteration.html#cb32-6" aria-hidden="true" tabindex="-1"></a>extracted_data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>) </span>
<span id="cb32-7"><a href="apis-and-iteration.html#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="apis-and-iteration.html#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co"># parse text from JSON to data frame</span></span>
<span id="cb32-9"><a href="apis-and-iteration.html#cb32-9" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(extracted_data)</span>
<span id="cb32-10"><a href="apis-and-iteration.html#cb32-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-11"><a href="apis-and-iteration.html#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(final_data)</span>
<span id="cb32-12"><a href="apis-and-iteration.html#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="apis-and-iteration.html#cb32-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-14"><a href="apis-and-iteration.html#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="apis-and-iteration.html#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="fu">parkwide_visitation</span>()</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1              11632614           11978413       NA       NA 2021
## 2      2              11082899           11692967       NA       NA 2021
## 3      3              12981524           18370611       NA       NA 2021
## 4      4              12857567           22155245       NA       NA 2021
## 5      5              13250575           27963739       NA       NA 2021
## 6      6              13789961           36122392       NA       NA 2021
## 7      7              14734920           41329530       NA       NA 2021
## 8      8              14280304           35380986       NA       NA 2021
## 9      9              13382939           30204635       NA       NA 2021
## 10    10              13882165           26961779       NA       NA 2021
## 11    11              13192146           18903397       NA       NA 2021
## 12    12              13007065           16051712       NA       NA 2021</code></pre>
<p>Because the default year is 2021, you don’t have to write it out explicitly in the function (so long as that’s the year you’re interested in). But, you still have the option of changing the year to something else:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="apis-and-iteration.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parkwide_visitation</span>(<span class="at">year =</span> <span class="st">&quot;1992&quot;</span>)</span></code></pre></div>
<pre><code>##    Month NonRecreationVisitors RecreationVisitors UnitCode UnitName Year
## 1      1               6209285           10940618       NA       NA 1992
## 2      2               6010027           11931340       NA       NA 1992
## 3      3               6756902           15369139       NA       NA 1992
## 4      4               7255782           21458739       NA       NA 1992
## 5      5               7690763           26648530       NA       NA 1992
## 6      6               7593227           33284625       NA       NA 1992
## 7      7               8438755           41099305       NA       NA 1992
## 8      8               8056823           38625804       NA       NA 1992
## 9      9               7329755           26438266       NA       NA 1992
## 10    10               7105574           23616057       NA       NA 1992
## 11    11               6507805           14338165       NA       NA 1992
## 12    12               6702698           10943961       NA       NA 1992</code></pre>
<div id="exercise-5" class="section level4 hasAnchor" number="1.2.2.1" style="color: maroon">
<h4><span class="header-section-number">1.2.2.1</span> Exercise #5<a href="apis-and-iteration.html#exercise-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Default our <code>unit_visitation()</code> function’s arguments related to the starting and ending months to January and December, respectively. This way, we are automatically pulling in data for entire years. Rerun the function for ROMO, EVER, and THRO for the 1980-2021 time period to make sure it works properly.</strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="apis-and-iteration.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Defaulting unit_visitation() function to start in Jan and end in Dec</span></span>
<span id="cb36-2"><a href="apis-and-iteration.html#cb36-2" aria-hidden="true" tabindex="-1"></a>default_unit_visitation <span class="ot">&lt;-</span> <span class="cf">function</span>(unitCode,<span class="at">startMonth =</span> <span class="dv">1</span>,startYear,<span class="at">endMonth =</span> <span class="dv">12</span>,endYear){</span>
<span id="cb36-3"><a href="apis-and-iteration.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-4"><a href="apis-and-iteration.html#cb36-4" aria-hidden="true" tabindex="-1"></a>  raw_visitation.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">GET</span>(<span class="at">url =</span> <span class="fu">paste0</span>(<span class="st">&quot;https://irmaservices.nps.gov/v3/rest/stats/visitation?unitCodes=&quot;</span>,unitCode,<span class="st">&quot;&amp;startMonth=&quot;</span>,startMonth,<span class="st">&quot;&amp;startYear=&quot;</span>,startYear,<span class="st">&quot;&amp;endMonth=&quot;</span>,endMonth,<span class="st">&quot;&amp;endYear=&quot;</span>,endYear))</span>
<span id="cb36-5"><a href="apis-and-iteration.html#cb36-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-6"><a href="apis-and-iteration.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  extracted_visitation.data <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">content</span>(raw_visitation.data, <span class="at">as =</span> <span class="st">&quot;text&quot;</span>, <span class="at">encoding =</span> <span class="st">&quot;utf-8&quot;</span>)</span>
<span id="cb36-7"><a href="apis-and-iteration.html#cb36-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-8"><a href="apis-and-iteration.html#cb36-8" aria-hidden="true" tabindex="-1"></a>  final_visitation.data <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">fromJSON</span>(extracted_visitation.data)</span>
<span id="cb36-9"><a href="apis-and-iteration.html#cb36-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-10"><a href="apis-and-iteration.html#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(final_visitation.data)</span>
<span id="cb36-11"><a href="apis-and-iteration.html#cb36-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-12"><a href="apis-and-iteration.html#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="apis-and-iteration.html#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Using new default_unit_visitation() function for ROMO, EVER, and THRO from 1980 to 2021</span></span>
<span id="cb36-14"><a href="apis-and-iteration.html#cb36-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-15"><a href="apis-and-iteration.html#cb36-15" aria-hidden="true" tabindex="-1"></a>ROMO_defaultdate_visitation <span class="ot">&lt;-</span> <span class="fu">default_unit_visitation</span>(<span class="at">unitCode =</span> <span class="st">&quot;ROMO&quot;</span>, <span class="at">startYear =</span> <span class="dv">1980</span>, <span class="at">endYear =</span> <span class="dv">2021</span>)</span>
<span id="cb36-16"><a href="apis-and-iteration.html#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="apis-and-iteration.html#cb36-17" aria-hidden="true" tabindex="-1"></a>EVER_defaultdate_visitation <span class="ot">&lt;-</span> <span class="fu">default_unit_visitation</span>(<span class="at">unitCode =</span> <span class="st">&quot;EVER&quot;</span>, <span class="at">startYear =</span> <span class="dv">1980</span>, <span class="at">endYear =</span> <span class="dv">2021</span>)</span>
<span id="cb36-18"><a href="apis-and-iteration.html#cb36-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-19"><a href="apis-and-iteration.html#cb36-19" aria-hidden="true" tabindex="-1"></a>THRO_defaultdate_visitation <span class="ot">&lt;-</span> <span class="fu">default_unit_visitation</span>(<span class="at">unitCode =</span> <span class="st">&quot;THRO&quot;</span>, <span class="at">startYear =</span> <span class="dv">1980</span>, <span class="at">endYear =</span> <span class="dv">2021</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="iterations" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Iterations<a href="apis-and-iteration.html#iterations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At this point, we now know how to develop functions so that we do not have to keep writing out redundant steps in a workflow. However, in that last exercise, you can see that we are <em>still</em> writing out redundant code; we are performing the exact same function on each of our three park units.</p>
<p>Another tool for reducing redundancy is <strong>iteration</strong>, which allows you to do the same thing on multiple inputs. Iteration can happen across different objects, different rows, different data frames, the list goes on and on!</p>
<div id="for-loops" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> For loops<a href="apis-and-iteration.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A <code>for</code> loop is base R’s iteration tool that executes code across a vector, an array, a list, etc. To save the outcome of each iteration, you must first create a vector to store the outputs in that is sized based on how many objects you want to iterate over. For example, I want to run our <code>parkwide_visitation()</code> function over the last five years: 2017, 2018, 2019, 2020, and 2021. To do that, I will first need to develop a vector listing each year:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="apis-and-iteration.html#cb37-1" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;2017&#39;</span>, <span class="st">&#39;2018&#39;</span>, <span class="st">&#39;2019&#39;</span>, <span class="st">&#39;2020&#39;</span>, <span class="st">&#39;2021&#39;</span>)</span></code></pre></div>
<p>… and then develop an empty list to store each year’s <code>parkwide_visitation()</code> results (i.e., output) into:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="apis-and-iteration.html#cb38-1" aria-hidden="true" tabindex="-1"></a>output_floop <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="at">length =</span> <span class="fu">length</span>(years))</span></code></pre></div>
<p>Now that we have a place to store each year’s function results, we can move forward with the for loop itself:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="apis-and-iteration.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(years)){</span>
<span id="cb39-2"><a href="apis-and-iteration.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-3"><a href="apis-and-iteration.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  output_floop[[i]] <span class="ot">&lt;-</span></span>
<span id="cb39-4"><a href="apis-and-iteration.html#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> years[i])</span>
<span id="cb39-5"><a href="apis-and-iteration.html#cb39-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-6"><a href="apis-and-iteration.html#cb39-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>… where <code>years[i]</code> tells the <code>for</code> loop to perform <code>parkwide_visitation()</code> on the <em>i<sup>th</sup></em> year (think of <em>i</em> as a moving across each year), and <code>output_floop[[i]]</code> directs the <code>for</code> loop to store the results of the <em>i<sup>th</sup></em> year’s run into <code>output</code>’s <em>i<sup>th</sup></em> list (think of <code>output_floop[[i]]</code> as the location in <code>output_floop</code> that the <em>i<sup>th</sup></em>’s results go).</p>
<p>We now have a list containing five data frames: one for each year of visitation data:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="apis-and-iteration.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(output_floop)</span></code></pre></div>
<pre><code>##      Length Class      Mode
## [1,] 6      data.frame list
## [2,] 6      data.frame list
## [3,] 6      data.frame list
## [4,] 6      data.frame list
## [5,] 6      data.frame list</code></pre>
<p>Because each year’s output is structured identically, we can confidently combine each year’s data frame into a single data frame using <code>dplyr::bind_rows()</code>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="apis-and-iteration.html#cb42-1" aria-hidden="true" tabindex="-1"></a>multi_years <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(output_floop)</span></code></pre></div>
<div id="exercise-6" class="section level4 hasAnchor" number="1.3.1.1" style="color: maroon">
<h4><span class="header-section-number">1.3.1.1</span> Exercise #6<a href="apis-and-iteration.html#exercise-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Use a for loop to run <code>unit_visitation()</code> with arguments <code>start_year = 1980</code> and <code>end_year = 2021</code> across ROMO, EVER, and THRO. Then, create a single data frame containing each park units’ output. (Hint: Your first step will be to create a vector listing each park unit.)</strong></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="apis-and-iteration.html#cb43-1" aria-hidden="true" tabindex="-1"></a>parks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ROMO&quot;</span>,<span class="st">&quot;EVER&quot;</span>,<span class="st">&quot;THRO&quot;</span>)</span>
<span id="cb43-2"><a href="apis-and-iteration.html#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="apis-and-iteration.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using for loops</span></span>
<span id="cb43-4"><a href="apis-and-iteration.html#cb43-4" aria-hidden="true" tabindex="-1"></a>output_floop <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>,<span class="at">length =</span> <span class="fu">length</span>(parks))</span>
<span id="cb43-5"><a href="apis-and-iteration.html#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="apis-and-iteration.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(parks)) {</span>
<span id="cb43-7"><a href="apis-and-iteration.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-8"><a href="apis-and-iteration.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  output_floop[[i]] <span class="ot">&lt;-</span> <span class="fu">default_unit_visitation</span>(<span class="at">unitCode =</span> parks[i],<span class="at">startYear =</span> <span class="dv">1980</span>, <span class="at">endYear =</span> <span class="dv">2021</span>)</span>
<span id="cb43-9"><a href="apis-and-iteration.html#cb43-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-10"><a href="apis-and-iteration.html#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="apis-and-iteration.html#cb43-11" aria-hidden="true" tabindex="-1"></a>multi_parks <span class="ot">&lt;-</span> output_floop <span class="sc">%&gt;%</span></span>
<span id="cb43-12"><a href="apis-and-iteration.html#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span></code></pre></div>
</div>
</div>
<div id="mapping" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Mapping<a href="apis-and-iteration.html#mapping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>tidyverse</code>’s <code>purrr</code> package has its own iteration function, <code>map()</code>, that is a variation of the <code>for</code> loop. <code>map()</code> takes a vector and applies a single function across it, then automatically stores all of the results into a list. In other words, <code>map()</code> creates an appropriately sized list to store our results in for us. This eliminates the need to create an empty list ahead of time.</p>
<p>To create the same output as our previous <code>for</code> loop on <code>parkwide_visitation()</code>, but using <code>map()</code> instead, we would run the following code:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="apis-and-iteration.html#cb44-1" aria-hidden="true" tabindex="-1"></a>output_map <span class="ot">&lt;-</span> years <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="apis-and-iteration.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">parkwide_visitation</span>(<span class="at">year =</span> .))</span></code></pre></div>
<p>… where <code>~</code> indicates that we want to perform <code>parkwide_visitation()</code> across all years, and <code>.</code> indicates that we want to use our piped vector, <code>years</code>, as the input to the <code>year</code> argument. As you can see, <code>output_map</code> is identical to <code>output_floop</code>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="apis-and-iteration.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(output_floop, output_map)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>… which means we should also <code>bind_rows()</code> to get the mapped output into a single data frame:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="apis-and-iteration.html#cb47-1" aria-hidden="true" tabindex="-1"></a>multi_years <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(output_map)</span></code></pre></div>
<div id="exercise-7" class="section level4 hasAnchor" number="1.3.2.1" style="color: maroon">
<h4><span class="header-section-number">1.3.2.1</span> Exercise #7<a href="apis-and-iteration.html#exercise-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>Use <code>map()</code> to run <code>unit_visitation()</code> with arguments <code>start_year = 1980</code> and <code>end_year = 2021</code> across ROMO, EVER, and THRO. Then, create a single data frame containing each park units’ output.</strong></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="apis-and-iteration.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mapping method (tidyverse mapping)</span></span>
<span id="cb48-2"><a href="apis-and-iteration.html#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="apis-and-iteration.html#cb48-3" aria-hidden="true" tabindex="-1"></a>output_map <span class="ot">&lt;-</span> parks <span class="sc">%&gt;%</span></span>
<span id="cb48-4"><a href="apis-and-iteration.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">default_unit_visitation</span>(<span class="at">unitCode =</span> ., <span class="at">startYear =</span> <span class="dv">1980</span>,<span class="at">endYear =</span> <span class="dv">2021</span>))</span>
<span id="cb48-5"><a href="apis-and-iteration.html#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="apis-and-iteration.html#cb48-6" aria-hidden="true" tabindex="-1"></a>multi_map_parks <span class="ot">&lt;-</span> output_map <span class="sc">%&gt;%</span></span>
<span id="cb48-7"><a href="apis-and-iteration.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span>
<span id="cb48-8"><a href="apis-and-iteration.html#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="apis-and-iteration.html#cb48-9" aria-hidden="true" tabindex="-1"></a>multi_map_parks <span class="ot">&lt;-</span> output_map <span class="sc">%&gt;%</span></span>
<span id="cb48-10"><a href="apis-and-iteration.html#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span>
<span id="cb48-11"><a href="apis-and-iteration.html#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="apis-and-iteration.html#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking to see if mapping and for methods ended with same result</span></span>
<span id="cb48-13"><a href="apis-and-iteration.html#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(multi_parks,multi_map_parks)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="data-munging.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
